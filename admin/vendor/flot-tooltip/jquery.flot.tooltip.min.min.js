!function(f){var e={tooltip:{show:!1,cssClass:"flotTip",content:"%s | X: %x | Y: %y",xDateFormat:null,yDateFormat:null,monthNames:null,dayNames:null,shifts:{x:10,y:20},defaultTheme:!0,snap:!0,lines:!1,clickTips:!1,onHover:function(d,c){},$compat:!1}};e.tooltipOpts=e.tooltip;var h=function(b){this.tipPosition={x:0,y:0},this.init(b)};h.prototype.init=function(a){function n(b){var d={};d.x=b.pageX,d.y=b.pageY,a.setTooltipPosition(d)}function m(p,o,b){k.clickmode?(f(a.getPlaceholder()).bind("plothover",l),a.hideTooltip(),k.clickmode=!1):(l(p,o,b),k.getDomElement().is(":visible")&&(f(a.getPlaceholder()).unbind("plothover",l),k.clickmode=!0))}function l(u,t,s){var r=function(w,v,y,x){return Math.sqrt((y-w)*(y-w)+(x-v)*(x-v))},q=function(G,F,E,D,C,B,A){if(!A||(A=function(I,H,O,N,M,L){if("undefined"!=typeof O){return{x:O,y:H}}if("undefined"!=typeof N){return{x:I,y:N}}var K,J=-1/((L-N)/(M-O));return{x:K=(M*(I*J-H+N)+O*(I*-J+H-L))/(J*(M-O)+N-L),y:J*K-J*I+H}}(G,F,E,D,C,B),A.x>=Math.min(E,C)&&A.x<=Math.max(E,C)&&A.y>=Math.min(D,B)&&A.y<=Math.max(D,B))){var z=D-B,y=C-E,x=E*B-D*C;return Math.abs(z*G+y*F+x)/Math.sqrt(z*z+y*y)}var w=r(G,F,E,D),v=r(G,F,C,B);return w>v?v:w};if(s){a.showTooltip(s,k.tooltipOptions.snap?s:t)}else{if(k.plotOptions.series.lines.show&&k.tooltipOptions.lines===!0){var p=k.plotOptions.grid.mouseActiveRadius,o={distance:p+1},b=t;f.each(a.getData(),function(E,D){for(var C=0,B=-1,A=1;A<D.data.length;A++){D.data[A-1][0]<=t.x&&D.data[A][0]>=t.x&&(C=A-1,B=A)}if(-1===B){return void a.hideTooltip()}var z={x:D.data[C][0],y:D.data[C][1]},y={x:D.data[B][0],y:D.data[B][1]},x=q(D.xaxis.p2c(t.x),D.yaxis.p2c(t.y),D.xaxis.p2c(z.x),D.yaxis.p2c(z.y),D.xaxis.p2c(y.x),D.yaxis.p2c(y.y),!1);if(x<o.distance){var w=r(z.x,z.y,t.x,t.y)<r(t.x,t.y,y.x,y.y)?C:B,v=(D.datapoints.pointsize,[t.x,z.y+(y.y-z.y)*((t.x-z.x)/(y.x-z.x))]),d={datapoint:v,dataIndex:w,series:D,seriesIndex:E};o={distance:x,item:d},k.tooltipOptions.snap&&(b={pageX:D.xaxis.p2c(v[0]),pageY:D.yaxis.p2c(v[1])})}}),o.distance<p+1?a.showTooltip(o.item,b):a.hideTooltip()}else{a.hideTooltip()}}}var k=this,j=f.plot.plugins.length;if(this.plotPlugins=[],j){for(var i=0;j>i;i++){this.plotPlugins.push(f.plot.plugins[i].name)}}a.hooks.bindEvents.push(function(c,d){if(k.plotOptions=c.getOptions(),"boolean"==typeof k.plotOptions.tooltip&&(k.plotOptions.tooltipOpts.show=k.plotOptions.tooltip,k.plotOptions.tooltip=k.plotOptions.tooltipOpts,delete k.plotOptions.tooltipOpts),k.plotOptions.tooltip.show!==!1&&"undefined"!=typeof k.plotOptions.tooltip.show){k.tooltipOptions=k.plotOptions.tooltip,k.tooltipOptions.$compat?(k.wfunc="width",k.hfunc="height"):(k.wfunc="innerWidth",k.hfunc="innerHeight");k.getDomElement();f(c.getPlaceholder()).bind("plothover",l),k.tooltipOptions.clickTips&&f(c.getPlaceholder()).bind("plotclick",m),k.clickmode=!1,f(d).bind("mousemove",n)}}),a.hooks.shutdown.push(function(c,d){f(c.getPlaceholder()).unbind("plothover",l),f(c.getPlaceholder()).unbind("plotclick",m),c.removeTooltip(),f(d).unbind("mousemove",n)}),a.setTooltipPosition=function(o){var r=k.getDomElement(),q=r.outerWidth()+k.tooltipOptions.shifts.x,p=r.outerHeight()+k.tooltipOptions.shifts.y;o.x-f(window).scrollLeft()>f(window)[k.wfunc]()-q&&(o.x-=q),o.y-f(window).scrollTop()>f(window)[k.hfunc]()-p&&(o.y-=p),isNaN(o.x)?k.tipPosition.x=k.tipPosition.xPrev:(k.tipPosition.x=o.x,k.tipPosition.xPrev=o.x),isNaN(o.y)?k.tipPosition.y=k.tipPosition.yPrev:(k.tipPosition.y=o.y,k.tipPosition.yPrev=o.y)},a.showTooltip=function(b,r,q){var p=k.getDomElement(),o=k.stringFormat(k.tooltipOptions.content,b);""!==o&&(p.html(o),a.setTooltipPosition({x:r.pageX,y:r.pageY}),p.css({left:k.tipPosition.x+k.tooltipOptions.shifts.x,top:k.tipPosition.y+k.tooltipOptions.shifts.y}).show(),"function"==typeof k.tooltipOptions.onHover&&k.tooltipOptions.onHover(b,p))},a.hideTooltip=function(){k.getDomElement().hide().html("")},a.removeTooltip=function(){k.getDomElement().remove()}},h.prototype.getDomElement=function(){var a=f("<div>");return this.tooltipOptions&&this.tooltipOptions.cssClass&&(a=f("."+this.tooltipOptions.cssClass),0===a.length&&(a=f("<div />").addClass(this.tooltipOptions.cssClass),a.appendTo("body").hide().css({position:"absolute"}),this.tooltipOptions.defaultTheme&&a.css({background:"#fff","z-index":"1040",padding:"0.4em 0.6em","border-radius":"0.5em","font-size":"0.8em",border:"1px solid #111",display:"none","white-space":"nowrap"}))),a},h.prototype.stringFormat=function(V,U){var T,S,R,Q,P,O=/%p\.{0,1}(\d{0,})/,N=/%s/,M=/%c/,L=/%lx/,K=/%ly/,J=/%x\.{0,1}(\d{0,})/,I=/%y\.{0,1}(\d{0,})/,H="%x",G="%y",F="%ct",E="%n";if("undefined"!=typeof U.series.threshold?(T=U.datapoint[0],S=U.datapoint[1],R=U.datapoint[2]):"undefined"!=typeof U.series.curvedLines?(T=U.datapoint[0],S=U.datapoint[1]):"undefined"!=typeof U.series.lines&&U.series.lines.steps?(T=U.series.datapoints.points[2*U.dataIndex],S=U.series.datapoints.points[2*U.dataIndex+1],R=""):(T=U.series.data[U.dataIndex][0],S=U.series.data[U.dataIndex][1],R=U.series.data[U.dataIndex][2]),null===U.series.label&&U.series.originSeries&&(U.series.label=U.series.originSeries.label),"function"==typeof V&&(V=V(U.series.label,T,S,U)),"boolean"==typeof V&&!V){return""}if(R&&(V=V.replace(F,R)),"undefined"!=typeof U.series.percent?Q=U.series.percent:"undefined"!=typeof U.series.percents&&(Q=U.series.percents[U.dataIndex]),"number"==typeof Q&&(V=this.adjustValPrecision(O,V,Q)),U.series.hasOwnProperty("pie")&&(P=U.series.data[0][1]),"number"==typeof P&&(V=V.replace(E,P)),V="undefined"!=typeof U.series.label?V.replace(N,U.series.label):V.replace(N,""),V="undefined"!=typeof U.series.color?V.replace(M,U.series.color):V.replace(M,""),V=this.hasAxisLabel("xaxis",U)?V.replace(L,U.series.xaxis.options.axisLabel):V.replace(L,""),V=this.hasAxisLabel("yaxis",U)?V.replace(K,U.series.yaxis.options.axisLabel):V.replace(K,""),this.isTimeMode("xaxis",U)&&this.isXDateFormat(U)&&(V=V.replace(J,this.timestampToDate(T,this.tooltipOptions.xDateFormat,U.series.xaxis.options))),this.isTimeMode("yaxis",U)&&this.isYDateFormat(U)&&(V=V.replace(I,this.timestampToDate(S,this.tooltipOptions.yDateFormat,U.series.yaxis.options))),"number"==typeof T&&(V=this.adjustValPrecision(J,V,T)),"number"==typeof S&&(V=this.adjustValPrecision(I,V,S)),"undefined"!=typeof U.series.xaxis.ticks){var D;D=this.hasRotatedXAxisTicks(U)?"rotatedTicks":"ticks";var C=U.dataIndex+U.seriesIndex;for(var B in U.series.xaxis[D]){if(U.series.xaxis[D].hasOwnProperty(C)&&!this.isTimeMode("xaxis",U)){var A=this.isCategoriesMode("xaxis",U)?U.series.xaxis[D][C].label:U.series.xaxis[D][C].v;A===T&&(V=V.replace(J,U.series.xaxis[D][C].label.replace(/\$/g,"$$$$")))}}}if("undefined"!=typeof U.series.yaxis.ticks){for(var z in U.series.yaxis.ticks){if(U.series.yaxis.ticks.hasOwnProperty(z)){var y=this.isCategoriesMode("yaxis",U)?U.series.yaxis.ticks[z].label:U.series.yaxis.ticks[z].v;y===S&&(V=V.replace(I,U.series.yaxis.ticks[z].label.replace(/\$/g,"$$$$")))}}}return"undefined"!=typeof U.series.xaxis.tickFormatter&&(V=V.replace(H,U.series.xaxis.tickFormatter(T,U.series.xaxis).replace(/\$/g,"$$"))),"undefined"!=typeof U.series.yaxis.tickFormatter&&(V=V.replace(G,U.series.yaxis.tickFormatter(S,U.series.yaxis).replace(/\$/g,"$$"))),V},h.prototype.isTimeMode=function(d,c){return"undefined"!=typeof c.series[d].options.mode&&"time"===c.series[d].options.mode},h.prototype.isXDateFormat=function(b){return"undefined"!=typeof this.tooltipOptions.xDateFormat&&null!==this.tooltipOptions.xDateFormat},h.prototype.isYDateFormat=function(b){return"undefined"!=typeof this.tooltipOptions.yDateFormat&&null!==this.tooltipOptions.yDateFormat},h.prototype.isCategoriesMode=function(d,c){return"undefined"!=typeof c.series[d].options.mode&&"categories"===c.series[d].options.mode},h.prototype.timestampToDate=function(a,k,j){var i=f.plot.dateGenerator(a,j);return f.plot.formatDate(i,k,this.tooltipOptions.monthNames,this.tooltipOptions.dayNames)},h.prototype.adjustValPrecision=function(j,i,m){var l,k=i.match(j);return null!==k&&""!==RegExp.$1&&(l=RegExp.$1,m=m.toFixed(l),i=i.replace(j,m)),i},h.prototype.hasAxisLabel=function(a,d){return -1!==f.inArray("axisLabels",this.plotPlugins)&&"undefined"!=typeof d.series[a].options.axisLabel&&d.series[a].options.axisLabel.length>0},h.prototype.hasRotatedXAxisTicks=function(a){return -1!==f.inArray("tickRotor",this.plotPlugins)&&"undefined"!=typeof a.series.xaxis.rotatedTicks};var g=function(b){new h(b)};f.plot.plugins.push({init:g,options:e,name:"tooltip",version:"0.8.5"})}(jQuery);